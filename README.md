# Мобильное приложение на React Native для экспертов и их учеников
## Задача
Создать MVP (минимально жизнеспособный продукт), чтобы первые клиенты могли войти в личный кабинет и просматривать уроки. Важно выпустить одновременно версии и для Android, и для iOS

## Решение
Для клиентской части был выбран стек React Native + TypeScript + Redux. Для серверной Node.js + MySQL

Был составлен и реализован список необходимых функций:

1. Авторизация
2. Подтверждение почты
3. Навигация (Stack + Tab)
4. Загрузка списка уроков с возможностью открыть любой
5. Блочная структура урока, состоящая из текста, картинок и видео
6. Простое управление дизайном приложения
7. Обработка ошибок
8. Ограничение попыток авторизации

Распишу подробнее, как реализована каждая функция:

1. Авторизация

Для авторизации использую JWT-токены, а именно access и refresh. Стандартная механика, по которой access токен хранится на клиенте и дает доступ к кабинету на небольшое время, например, 20 минут. После истечения срока access токена выполняется запрос к серверу с refresh токеном для обновления первого.

Также добавил возможность сохранения нескольких refresh токенов у одного пользователя. Он сможет логиниться с нескольких телефонов + это полезно на будущее, когда у приложения появится веб версия и пользователи смогут входить одновременно и на телефоне, и на компьютере. Истекшие токены не перезаписываются, а значит будут копиться в базе данных. Чтобы удалять лишние токены, прописал периодическую чистку с помощью cron.

2. Подтверждение почты

Почта подтверждается через переход по ссылке из письма. Для отправки писем подключил Node.js модуль nodemailer.

3. Навигация (Stack + Tab)

Добавил в приложение два типа навигации. По экранам - Stack, и по вкладкам - Tab. Вкладки пока две - "Главная" и "Профиль". История перехода по экранам сохраняется и всегда есть возможность вернуться к предыдущему экрану, нажав "Обратно". Навигация реализована с помощью react-navigation.

4. Загрузка списка уроков с возможностью открыть любой

Для списка уроков создал отдельную таблицу в базе данных. Каждый урок содержит в себе заголовок, обложку и контент.

В текущей версии приложения не реализовано разделение доступов, чтобы каждый клиент видел свой список уроков. Также нельзя создавать папки для уроков. Все это планируется добавить позже.

5. Блочная структура урока, состоящая из текста, картинок и видео

Контент в уроках выглядит как список блоков. Каждый блок содержит в себе текст, картинку или ссылку на YouTube-видео. В дальнейшем планируется добавить редактор уроков, в котором будет удобно работать с блоками.

6. Простое управление дизайном приложения

Для этого создал палитру цветов в config'е приложения и использовал только те цвета, которые доступны в палитре. Для подбора цветов использовал сервис https://huemint.com/bootstrap-plus/ который генерирует приятную глазу цветовую палитру на нейронных сетях.

Благодаря палитре и легкому способу ее генерации изменить дизайн теперь можно за несколько кликов.

7. Обработка ошибок

В форму авторизации вывел ошибки "Неверный логин или пароль" и "Слишком много запросов, попробуйте позже".

8. Ограничение попыток авторизации

Для ограничения количества запросов к api приложения использовал express-rate-limit. Сейчас ограничение применено только к эндпоинту "/login".

###### Код представлен в ознакомительных целях, не для свободного использования
